# Blades and Steeds (ã€Šä¹°åˆ€ä¹°é©¬ã€‹) ğŸ—¡ï¸ğŸ´

ã€Šä¹°åˆ€ä¹°é©¬ã€‹æ˜¯ä¸€æ¬¾æ”¯æŒ â‰¥2 äººçš„å¼ºäº’åŠ¨ã€å¼‚æ­¥ä¸åŒæ­¥ç»“åˆçš„å›åˆåˆ¶ç½‘é¡µæ¡Œæ¸¸ã€‚é¡¹ç›®é‡‡ç”¨äº†çº¯ Serverless çš„ç°ä»£åŒ–æ¶æ„ï¼Œå‰ç«¯ä½¿ç”¨ Reactï¼Œåç«¯é‡‡ç”¨ Cloudflare Workers (Durable Objects) å®ç°æ— ç¼çš„ WebSocket çŠ¶æ€åŒæ­¥ã€‚

## ğŸ›  æŠ€æœ¯æ ˆ

- **å‰ç«¯:** React 18, TypeScript, Vite, TailwindCSS, Lucide-React
- **åç«¯:** Cloudflare Workers, Durable Objects (ç”¨äºæˆ¿é—´çŠ¶æ€æŒä¹…åŒ–ä¸ WebSocket é€šä¿¡)
- **åŒ…ç®¡ç†å™¨:** pnpm

## ğŸš€ æœ¬åœ°å¼€å‘æŒ‡å—

### 1. ç¯å¢ƒå‡†å¤‡
åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ä½ çš„ç³»ç»Ÿå·²å®‰è£…ä»¥ä¸‹ç¯å¢ƒï¼š
- [Node.js](https://nodejs.org/) (å»ºè®® v18 æˆ–æ›´é«˜ç‰ˆæœ¬)
- [pnpm](https://pnpm.io/) (å¦‚æœæ²¡æœ‰å®‰è£…ï¼Œè¯·è¿è¡Œ `npm install -g pnpm`)
- Cloudflare è´¦å· (ç”¨äºéƒ¨ç½²å’Œè¿è¡Œ Durable Objects)

### 2. å®‰è£…ä¾èµ–
å…‹éš†é¡¹ç›®åˆ°æœ¬åœ°åï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œï¼š
```bash
pnpm install
```

### 3. è¿è¡Œæœ¬åœ°å¼€å‘æœåŠ¡å™¨
ç”±äºé¡¹ç›®åŒ…å«å‰ç«¯ Vite å’Œåç«¯ Cloudflare Workerï¼Œä½ éœ€è¦æ‰“å¼€ä¸¤ä¸ªç»ˆç«¯çª—å£åŒæ—¶å¯åŠ¨å®ƒä»¬ï¼š

**ç»ˆç«¯ Aï¼šå¯åŠ¨åç«¯ Worker (Wrangler)**
```bash
# é¦–æ¬¡è¿è¡Œå¯èƒ½éœ€è¦ç™»å½• Cloudflare è´¦å·
pnpm exec wrangler login

# å¯åŠ¨æœ¬åœ° Worker ç¯å¢ƒ
pnpm run start:worker
```
*(é»˜è®¤æƒ…å†µä¸‹ï¼Œåç«¯ä¼šè¿è¡Œåœ¨ `http://127.0.0.1:8787`)*

**ç»ˆç«¯ Bï¼šå¯åŠ¨å‰ç«¯ (Vite)**
```bash
pnpm run dev
```
*(å‰ç«¯å¯åŠ¨åï¼Œé€šå¸¸ä¼šè¿è¡Œåœ¨ `http://localhost:5173`ã€‚Vite å·²é…ç½®äº† Proxy ä»£ç†ï¼Œä¼šå°† `/api` å’Œ WebSocket è¯·æ±‚è‡ªåŠ¨è½¬å‘åˆ°åç«¯çš„ 8787 ç«¯å£ã€‚)*

## ğŸ“¦ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### 1. éƒ¨ç½²åç«¯ (Cloudflare Workers)
é¡¹ç›®ä½¿ç”¨ `wrangler.jsonc` è¿›è¡Œé…ç½®ï¼Œæ ¸å¿ƒçš„æˆ¿é—´é€»è¾‘å’Œæ³¨å†Œä¸­å¿ƒä½äº `worker/` ç›®å½•ä¸‹ã€‚
```bash
pnpm run deploy:worker
```
*(æˆ–è€…ç›´æ¥è¿è¡Œ: `pnpm exec wrangler deploy`)*

### 2. éƒ¨ç½²å‰ç«¯ (é™æ€æ‰˜ç®¡)
å‰ç«¯å¯ä»¥éƒ¨ç½²åˆ° Cloudflare Pagesã€Vercel æˆ–ä»»ä½•æ”¯æŒé™æ€æ–‡ä»¶çš„æ‰˜ç®¡æœåŠ¡ä¸Šã€‚
```bash
# æ„å»ºç”Ÿäº§ç¯å¢ƒçš„å‰ç«¯é™æ€æ–‡ä»¶
pnpm run build
```
æ„å»ºäº§ç‰©ä¼šç”Ÿæˆåœ¨ `dist/` ç›®å½•ä¸­ã€‚å¦‚æœä½ ä½¿ç”¨ Cloudflare Pagesï¼Œå¯ä»¥ç›´æ¥å…³è” Github ä»“åº“å¹¶è®¾ç½®æ„å»ºå‘½ä»¤ä¸º `pnpm run build`ï¼Œè¾“å‡ºç›®å½•ä¸º `dist`ã€‚

## ğŸ“ æ ¸å¿ƒç›®å½•ç»“æ„

```text
blades-and-steeds/
â”œâ”€â”€ src/                  # React å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ components/       # UI ç»„ä»¶ (åœ°å›¾æ¸²æŸ“ã€ç©å®¶åˆ—è¡¨ã€åŠ¨ä½œæ—¥å¿—ç­‰)
â”‚   â”œâ”€â”€ pages/            # é¡µé¢è·¯ç”± (ä¸»é¡µã€æˆ¿é—´é¡µã€è®¾ç½®é¡µ)
â”‚   â”œâ”€â”€ types/            # TypeScript ç±»å‹å®šä¹‰ (å‰åç«¯å…±ç”¨)
â”‚   â”œâ”€â”€ hooks/            # è‡ªå®šä¹‰ Hooks (å¦‚ useWebSocket)
â”‚   â””â”€â”€ ...
â”œâ”€â”€ worker/               # Cloudflare Workers åç«¯ä»£ç 
â”‚   â”œâ”€â”€ index.ts          # API è·¯ç”±å…¥å£ & WebSocket å‡çº§æ¡æ‰‹
â”‚   â”œâ”€â”€ gameRoom.ts       # Durable Object: æ ¸å¿ƒæ¸¸æˆé€»è¾‘å’ŒçŠ¶æ€æœº
â”‚   â””â”€â”€ roomRegistry.ts   # Durable Object: å…¨å±€æˆ¿é—´å¤§å…æ³¨å†Œè¡¨
â”œâ”€â”€ game/                 # è®¾è®¡æ–‡æ¡£ä¸ç´ æ (Python è§„åˆ™ç”Ÿæˆè„šæœ¬ã€å›¾æ ‡ç­‰)
â”œâ”€â”€ vite.config.ts        # å‰ç«¯æ„å»ºä¸ä»£ç†é…ç½®
â””â”€â”€ wrangler.jsonc        # Cloudflare éƒ¨ç½²é…ç½®
```

## ğŸ® æ¸¸æˆç‰¹æ€§
- âš¡ **WebSocket å®æ—¶é€šä¿¡ï¼š** åŠ¨ä½œæ—¥å¿—ã€è¡€é‡å˜åŒ–ã€ç‰©å“æŠ¢å¤ºå®ç°ä½å»¶è¿ŸåŒæ­¥ã€‚
- ğŸ›¡ **Durable Objects çŠ¶æ€æŒä¹…åŒ–ï¼š** ç©å®¶æ„å¤–æ‰çº¿å¯éšæ—¶é‡è¿ï¼Œæˆ¿é—´çŠ¶æ€ä¸ä¸¢å¤±ã€‚
- ğŸ§© **é«˜æ‰©å±•æ€§ç±»å‹è®¾è®¡ï¼š** æ–°å¢èŒä¸šã€æ–°æ­¦å™¨åªéœ€åœ¨ `types/game.ts` å’Œ `gameRoom.ts` ä¸­æ·»åŠ å¯¹åº”åˆ†æ”¯å³å¯å¿«é€Ÿå®ç°ã€‚