# 《买刀买马》 游戏设计与详细规则

## 1. 基础规则

### 1.1 游戏综述
- **游戏人数：** ≥2 人（原则上最多 8 人）。
- **获胜条件：** 存活到最后的一人获胜（特殊情况：爆破手同归于尽时判胜）。
- **开局流程：** 房主可设定初始血量（默认10）和备选职业数（默认3）。每局开始前，系统为每位玩家随机分配候选项，玩家进行**选择**决定本局角色。每局同一种职业最多允许2名玩家选择。

### 1.2 角色与地图
- **角色属性：** 初始血量 10 点（可由房主配置）。玩家的物品栏、血量及步数均为公开透明。
- **初始装备：** 衣服 x1，买刀权 x1，买马权 x1（部分特殊职业会有所不同）。
- **地图机制：** 地图由【各玩家的城池】与【中央】组成。城池仅通往中央，玩家之间无法直接从一个城池移动到另一个城池，必须经过中央中转。

---

## 2. 回合与行动

### 2.1 步数与行动池
每回合的行动需要消耗“步数”。
**每回合步数 = 基础步数(1步) + 随机分配步数（随机池总量 = 当前存活人数）。**

玩家在拥有步数时，可执行以下行动：

| 行动名称 | 消耗 | 详细规则 |
| :--- | :--- | :--- |
| **移动** | 1步 | 在【所在城池】与【中央】之间移动一次。 |
| **购买** | 1步 + 购买权 | **仅限在【自己的城池】内进行。**消耗1步和对应购买权获得实体物品（箭矢、弹药、炸弹为消耗品，购买权不消失）。 |
| **抢夺** | 1步 | 需与目标同位置。随机（或指定）抢夺对方任意一件实体物品（脂肪衣不可抢）。不可抢夺购买权。 |
| **攻击-刀** | 1步 | 需与目标同位置。对目标造成伤害。 |
| **攻击-马** | 1步 | 需与目标同城内（中央不可用）。造成伤害 + 强制将目标踢回中央。 |

### 2.2 物品与遗物原则
- **持有 vs 使用：** 玩家可抢夺任何物品。若职业不匹配（例如拳击手抢到了刀），物品仅占位，无法使用也无法提供伤害加成。
- **遗物处理：** 当一名玩家被击杀后，其身上所有的非绑定物品将进入待选池，**击杀者可免费挑选 1 件**作为战利品，其余物品全部销毁。

### 2.3 结算顺序 (Settlement Order)
- **按释放顺序生效 (FIFO)：** 游戏中的延时类技能（如法师的药水、火箭兵的炮弹），将在**设定的轮数结束时（所有人均行动完毕后）**统一触发结算。
- **被动触发：** 外星人的双飞碟被动，会在所有人行动完毕且**延时技能生效前**优先触发。

---

## 3. 战斗数值系统

**最终伤害 = (武器总伤害) - (衣服总数量) + 1**
*(注：若计算结果 ≤ 0，则造成 0 点伤害，即无法破防)*

- **🗡️ 刀 (基础伤害 1):** 总伤害 = 1 + (刀数量 - 1)
- **🐴 马 (基础伤害 3):** 总伤害 = 3 + (马数量 - 1)

---

## 4. 职业系统详解

> **核心原则：** 所有职业专属道具的伤害均遵循**【数量+1，伤害+1】**的叠加规则。

### ① 法师 (Mage)
- **初始与购买：** 无特殊初始。可无限购买 🧪 药水 (消耗1步，且不占物品栏)。
- **职业规则：**
  - **技能：** 延时回血。指定全图任意位置（中央或某人城池）投掷，下回合所有人行动结束后生效。
  - **效果：** 该位置上的所有人回复 X 点血量（X由施法时投入的额外步数决定）。

### ② 弓箭手 (Archer)
- **初始与购买：** 初始自带 买弓权 x1。可购买 🏹 弓 (2步+权) 和 🎯 箭矢 (1步，消耗品)。
- **职业规则：**
  - **射击：** 消耗 1步 + 1支箭（需持有弓）。
  - **范围：** 当前位置 或 相邻区域（中央与城池互为相邻）。
  - **伤害：** 1 + (弓数量 - 1)。

### ③ 火箭兵 (Rocketeer)
- **初始与购买：** 初始自带 买火箭筒权 x1。可购买 🚀 火箭筒 (2步+权) 和 📦 火箭弹 (2步，消耗品)。
- **职业规则：**
  - **开火：** 消耗 1步 + 1发火箭弹（需持有火箭筒）。
  - **范围：** 全图任意指定区域（延时AOE，下回合结束时生效）。
  - **伤害：** 造成 2 + (火箭筒数量 - 1) 点**真实伤害**。

### ④ 爆破手 (Bomber)
- **初始与购买：** 初始无特殊。可购买 💣 炸弹 (1步，消耗品)。
- **职业规则：**
  - **埋弹：** 消耗 1步。在脚下放置炸弹（全场可见，可堆叠）。
  - **引爆：** 消耗 1步。瞬间引爆自己场上所有的炸弹。
  - **伤害：** 每颗炸弹造成 1 点**真实伤害**。

### ⑤ 拳击手 (Boxer)
- **初始与购买：** 初始自带 三种拳套权。**无衣服，无法使用刀和马。**
  - 🥉 铜拳套 (1步) / 🥈 银拳套 (2步) / 🥇 金拳套 (3步)
- **职业规则：**
  - **攻击：** 消耗 1步，选择佩戴的一种拳套进行近战攻击。
  - **伤害：** 基础值 + (同种数量 - 1)。铜=1 / 银=2 / 金=3 (**真实伤害**)。

### ⑥ 武僧 (Monk)
- **初始与购买：** 初始自带 三种腰带权。**无衣服，无法使用刀和马。**
  - 🥉 铜腰带 (1步) / 🥈 银腰带 (2步) / 🥇 金腰带 (3步)
- **职业规则：**
  - **攻击：** 消耗 1步，选择佩戴的一种腰带攻击。**真实伤害 + 强制踢飞位移**（中央踢回城，城池踢回中央）。
  - **伤害与范围：** 铜=1(仅近战) / 银=1(可打相邻区域) / 金=2(仅近战)。

### ⑦ 外星人 (Alien)
- **初始与购买：** 初始自带 UFO权 x1。**无法使用马。** 可购买 🛸 UFO (2步+权)。
- **职业规则：**
  - **主动瞬移：** 消耗 1步。移动到地图上任意位置。
  - **被动跃迁：** 若身上拥有 2 个 UFO，本回合所有人行动结束后（且在延时技能结算前），可**免费且无视距离**进行一次瞬移。

### ⑧ 胖子 (Fatty)
- **初始与购买：** 开局自带【脂肪衣】（提供1点防御，不可被抢夺，死后消失）。**无法使用马。**
- **职业规则：**
  - **抱人移动：** 移动时需要消耗**双倍步数(2步)**，但可以强制拖拽当前位置的任意一人，与你一起移动到相邻位置。

### ⑨ 吸血鬼 (Vampire)
- **初始与购买：** 初始无特殊。正常购买刀马。
- **职业规则：**
  - **被动吸血：** 只要使用【刀】发起攻击（无论最终是否破防造成伤害），自身立刻回复 1 点血量（不超过血量上限）。